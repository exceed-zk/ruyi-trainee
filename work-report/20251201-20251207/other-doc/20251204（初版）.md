# **20251204：**

在linux上配置了idea后，下载一些常用的插件

主要的
Eclipse PDE（在idea中运行Eclipse的插件）

Tabnine（旧版）目前来看这个只有旧版才能摒弃AI，不过可能不兼容或者找到安装方式（最后验证，因为idea本身就有自动补全的功能）

Jclasslib：调试运行 Eclipse 时能查看各线程调用栈和各变量的值。变量包含复杂类型，例如 List。
idea会内置Maven插件配置好后就可以用了：支持 Maven 项目

还有一个辅助插件Maven-Helper（发现无用）

# **20251206：**

### 在 IntelliJ IDEA 中适配 `.polyglot.pom.tycho` 的方法（不行，不兼容）

[支持的语种](https://mvnrepository.com/artifact/io.takari.polyglot/polyglot-translate-plugin)

### [takari/polyglot-maven：支持Apache Maven POM文件的替代标记](https://github.com/takari/polyglot-maven)

现在想到的办法，先手动创建pom文件为idea所用，等再找能用的插件或者更加简单的方式

感觉是有用的文章
[如何使用IntelliJ IDEA进行Eclipse插件开发？ intellij-idea eclipse-plugin eclipse-rcp - Dev59](https://dev59.com/RV8e5IYBdhLWcg3wEG7A)

这篇文章主要说明远程调试开发，感觉复杂不是太好

# **20251207：**

准备采用硬替换为pom文件使用

[图片](./images/替代pom.png)

[揭秘Eclipse与IntelliJ IDEA插件完美融合：高效开发，一步到位 - 云原生实践](https://www.oryoy.com/news/jie-mi-eclipse-yu-intellij-idea-cha-jian-wan-mei-rong-he-gao-xiao-kai-fa-yi-bu-dao-wei.html)

这篇文章是为了方便在Eclipse里的插件进行迁移，其中的一个例子我觉得后续会有用，就是CodeFormatter，后续应该会用上

到了配置启动的步骤，配置PDE这个插件

## AI小结：

#### Eclipse PDE Partial 插件功能确认

通过插件文档确认了 Eclipse PDE Partial 插件的功能和限制：

**支持的功能：**
- ✅ MANIFEST.MF 和 plugin.xml 文件的编辑增强（语法高亮、自动补全）
- ✅ 本地运行配置（Eclipse Application Partial）
- ✅ 目标平台配置（Eclipse Target）

**重要限制：**
- ❌ v1.6.8 之后的版本不再支持远程调试和 Wishes-launcher
- ⚠️ 本地运行需要正确配置 Eclipse Target 和模块 Facet

**结论：** 该插件主要用于编辑器增强和本地运行。

#### 配置 Eclipse Target

**步骤：**

1. **打开配置**：`File → Settings → Languages & Frameworks → Eclipse Target`

2. **添加 Eclipse 安装路径**：
   - 点击 `+` → Eclipse Installation
   - 选择 Eclipse 安装目录（包含 eclipse.exe 的目录）
   - 别名：Eclipse 2025-09

3. **添加项目构建输出**（可选）：
   - 点击 `+` → Plugins Directory
   - 路径：`d:\ruyiSDK\plugins\ruyisdk-eclipse-plugins\sites\repository\target\repository\plugins`

4. **验证配置**：
   - 切换到 Content 标签页
   - 确认能看到 Eclipse SDK 的 661 个 bundles
   - 确认能看到 8 个 RuyiSDK 插件 bundles

#### 为模块添加 Eclipse PDE Partial Facet

**目的：** 让运行配置识别插件模块并从编译输出加载

**操作步骤：**

1. **打开项目结构**：`File → Project Structure → Modules`

2. **选择 plugins 父模块**

3. **添加 Facet**：
   - 点击 `+` → Facet → Eclipse PDE Partial
   - 在 Binary Output 中勾选所有 8 个插件模块：
     - org.ruyisdk.core
     - org.ruyisdk.devices
     - org.ruyisdk.intro
     - org.ruyisdk.news
     - org.ruyisdk.packages
     - org.ruyisdk.projectcreator
     - org.ruyisdk.ruyi
     - org.ruyisdk.ui

4. **应用配置**

**注意事项：**
- Compiler Output 路径：`out/production` 和 `out/test`（IDEA 默认）
- 实际 Maven 输出在 `target/classes`，但 Facet 配置会自动处理

#### 创建 Eclipse Application Partial 运行配置

**步骤：**

1. **打开运行配置**：`Run → Edit Configurations...`

2. **添加配置**：点击 `+` → Eclipse Application Partial

3. **配置参数**：
   - **名称**：Debug RuyiSDK Eclipse Plugins
   - **运行于**：本地机器
   - **Product**：org.eclipse.epp.package.rcp.product
   - **Application**：org.eclipse.ui.ide.workbench
   - **JRE**：选择 JDK 17-21
   - **虚拟机选项**：
     ```
     -Xmx1024m
     -Dosgi.requiredJavaVersion=17
     ```
   - **程序参数(可选)**：
     
     ```
     -consoleLog
     -clean
     ```
   - **工作目录**：保持自动生成的路径
   - ☑️ **Clean runtime directory**（勾选）
   
4. **配置 Before launch**：
   - 展开 "执行前(B)" 部分
   - 确保有 "构建" 任务

5. **应用并保存**

#### 首次运行测试

**操作：**

1. **构建项目**：`Build → Build Project (Ctrl + F9)`

2. **运行配置**：点击绿色运行按钮 ▶️

**结果：**
- ✅ Eclipse IDE 窗口成功启动
- [成功截图](./images/试运行成功.png)

#### 解决插件加载问题

**方案选择：使用构建输出 + 重启加载**

**操作步骤：**

1. **构建插件 jar 包**：
   ```bash
   cd d:\ruyiSDK\plugins\ruyisdk-eclipse-plugins
   mvn clean verify
   ```

2. **确保 Eclipse Target 包含构建输出**：
   - 已添加 Plugins Directory：`sites/repository/target/repository/plugins`

3. **重新运行 Eclipse Application 配置**

4. **验证插件加载**：
   - 在启动的 Eclipse 中：`Help → About Eclipse → Installation Details → Plugins`
   - 搜索 "ruyisdk"
   - ✅ 应该能看到 8 个 RuyiSDK 插件

**开发工作流：**
```
1. 在 IDEA 中修改代码
2. 运行 mvn clean verify（30-60秒）
3. 重启 Eclipse Application 配置
4. 验证修改效果
```

#### 关于编辑器红色波浪线的说明

**现象：** 
- IDEA 编辑器中 Eclipse API 导入显示红色波浪线
- 提示："找不到包 org.eclipse.core.runtime"

**原因：**
- IDEA 使用 Maven classpath 解析依赖
- Eclipse 插件依赖在 MANIFEST.MF 中声明（OSGi 方式）
- IDEA 的 Eclipse PDE 支持有限，无法完全解析 OSGi 依赖

**影响：**
- ❌ 编辑器显示错误提示
- ✅ Maven/Tycho 构建正常（使用 MANIFEST.MF）
- ✅ 运行时正常（OSGi 加载依赖）

**解决方案：**
- **推荐**：接受这个限制，专注于功能开发
- **可选**：手动添加 Eclipse plugins 目录到 Libraries

**结论：** 这是 Eclipse 插件在 IDEA 中开发的正常现象，不影响实际开发和运行。

